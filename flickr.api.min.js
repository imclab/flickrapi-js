var hexcase=0,b64pad="",chrsz=8;function hex_md5(d){return binl2hex(core_md5(str2binl(d),d.length*chrsz))}function b64_md5(d){return binl2b64(core_md5(str2binl(d),d.length*chrsz))}function str_md5(d){return binl2str(core_md5(str2binl(d),d.length*chrsz))}function hex_hmac_md5(d,g){return binl2hex(core_hmac_md5(d,g))}function b64_hmac_md5(d,g){return binl2b64(core_hmac_md5(d,g))}function str_hmac_md5(d,g){return binl2str(core_hmac_md5(d,g))}
function md5_vm_test(){return hex_md5("abc")=="900150983cd24fb0d6963f7d28e17f72"}
function core_md5(d,g){d[g>>5]|=128<<g%32;d[(g+64>>>9<<4)+14]=g;for(var c=1732584193,a=-271733879,b=-1732584194,e=271733878,f=0;f<d.length;f+=16){var h=c,i=a,j=b,k=e;c=md5_ff(c,a,b,e,d[f+0],7,-680876936);e=md5_ff(e,c,a,b,d[f+1],12,-389564586);b=md5_ff(b,e,c,a,d[f+2],17,606105819);a=md5_ff(a,b,e,c,d[f+3],22,-1044525330);c=md5_ff(c,a,b,e,d[f+4],7,-176418897);e=md5_ff(e,c,a,b,d[f+5],12,1200080426);b=md5_ff(b,e,c,a,d[f+6],17,-1473231341);a=md5_ff(a,b,e,c,d[f+7],22,-45705983);c=md5_ff(c,a,b,e,d[f+8],7,
1770035416);e=md5_ff(e,c,a,b,d[f+9],12,-1958414417);b=md5_ff(b,e,c,a,d[f+10],17,-42063);a=md5_ff(a,b,e,c,d[f+11],22,-1990404162);c=md5_ff(c,a,b,e,d[f+12],7,1804603682);e=md5_ff(e,c,a,b,d[f+13],12,-40341101);b=md5_ff(b,e,c,a,d[f+14],17,-1502002290);a=md5_ff(a,b,e,c,d[f+15],22,1236535329);c=md5_gg(c,a,b,e,d[f+1],5,-165796510);e=md5_gg(e,c,a,b,d[f+6],9,-1069501632);b=md5_gg(b,e,c,a,d[f+11],14,643717713);a=md5_gg(a,b,e,c,d[f+0],20,-373897302);c=md5_gg(c,a,b,e,d[f+5],5,-701558691);e=md5_gg(e,c,a,b,d[f+
10],9,38016083);b=md5_gg(b,e,c,a,d[f+15],14,-660478335);a=md5_gg(a,b,e,c,d[f+4],20,-405537848);c=md5_gg(c,a,b,e,d[f+9],5,568446438);e=md5_gg(e,c,a,b,d[f+14],9,-1019803690);b=md5_gg(b,e,c,a,d[f+3],14,-187363961);a=md5_gg(a,b,e,c,d[f+8],20,1163531501);c=md5_gg(c,a,b,e,d[f+13],5,-1444681467);e=md5_gg(e,c,a,b,d[f+2],9,-51403784);b=md5_gg(b,e,c,a,d[f+7],14,1735328473);a=md5_gg(a,b,e,c,d[f+12],20,-1926607734);c=md5_hh(c,a,b,e,d[f+5],4,-378558);e=md5_hh(e,c,a,b,d[f+8],11,-2022574463);b=md5_hh(b,e,c,a,d[f+
11],16,1839030562);a=md5_hh(a,b,e,c,d[f+14],23,-35309556);c=md5_hh(c,a,b,e,d[f+1],4,-1530992060);e=md5_hh(e,c,a,b,d[f+4],11,1272893353);b=md5_hh(b,e,c,a,d[f+7],16,-155497632);a=md5_hh(a,b,e,c,d[f+10],23,-1094730640);c=md5_hh(c,a,b,e,d[f+13],4,681279174);e=md5_hh(e,c,a,b,d[f+0],11,-358537222);b=md5_hh(b,e,c,a,d[f+3],16,-722521979);a=md5_hh(a,b,e,c,d[f+6],23,76029189);c=md5_hh(c,a,b,e,d[f+9],4,-640364487);e=md5_hh(e,c,a,b,d[f+12],11,-421815835);b=md5_hh(b,e,c,a,d[f+15],16,530742520);a=md5_hh(a,b,e,
c,d[f+2],23,-995338651);c=md5_ii(c,a,b,e,d[f+0],6,-198630844);e=md5_ii(e,c,a,b,d[f+7],10,1126891415);b=md5_ii(b,e,c,a,d[f+14],15,-1416354905);a=md5_ii(a,b,e,c,d[f+5],21,-57434055);c=md5_ii(c,a,b,e,d[f+12],6,1700485571);e=md5_ii(e,c,a,b,d[f+3],10,-1894986606);b=md5_ii(b,e,c,a,d[f+10],15,-1051523);a=md5_ii(a,b,e,c,d[f+1],21,-2054922799);c=md5_ii(c,a,b,e,d[f+8],6,1873313359);e=md5_ii(e,c,a,b,d[f+15],10,-30611744);b=md5_ii(b,e,c,a,d[f+6],15,-1560198380);a=md5_ii(a,b,e,c,d[f+13],21,1309151649);c=md5_ii(c,
a,b,e,d[f+4],6,-145523070);e=md5_ii(e,c,a,b,d[f+11],10,-1120210379);b=md5_ii(b,e,c,a,d[f+2],15,718787259);a=md5_ii(a,b,e,c,d[f+9],21,-343485551);c=safe_add(c,h);a=safe_add(a,i);b=safe_add(b,j);e=safe_add(e,k)}return Array(c,a,b,e)}function md5_cmn(d,g,c,a,b,e){return safe_add(bit_rol(safe_add(safe_add(g,d),safe_add(a,e)),b),c)}function md5_ff(d,g,c,a,b,e,f){return md5_cmn(g&c|~g&a,d,g,b,e,f)}function md5_gg(d,g,c,a,b,e,f){return md5_cmn(g&a|c&~a,d,g,b,e,f)}
function md5_hh(d,g,c,a,b,e,f){return md5_cmn(g^c^a,d,g,b,e,f)}function md5_ii(d,g,c,a,b,e,f){return md5_cmn(c^(g|~a),d,g,b,e,f)}function core_hmac_md5(d,g){var c=str2binl(d);if(c.length>16)c=core_md5(c,d.length*chrsz);for(var a=Array(16),b=Array(16),e=0;e<16;e++){a[e]=c[e]^909522486;b[e]=c[e]^1549556828}c=core_md5(a.concat(str2binl(g)),512+g.length*chrsz);return core_md5(b.concat(c),640)}function safe_add(d,g){var c=(d&65535)+(g&65535);return(d>>16)+(g>>16)+(c>>16)<<16|c&65535}
function bit_rol(d,g){return d<<g|d>>>32-g}function str2binl(d){for(var g=[],c=(1<<chrsz)-1,a=0;a<d.length*chrsz;a+=chrsz)g[a>>5]|=(d.charCodeAt(a/chrsz)&c)<<a%32;return g}function binl2str(d){for(var g="",c=(1<<chrsz)-1,a=0;a<d.length*32;a+=chrsz)g+=String.fromCharCode(d[a>>5]>>>a%32&c);return g}function binl2hex(d){for(var g=hexcase?"0123456789ABCDEF":"0123456789abcdef",c="",a=0;a<d.length*4;a++)c+=g.charAt(d[a>>2]>>a%4*8+4&15)+g.charAt(d[a>>2]>>a%4*8&15);return c}
function binl2b64(d){for(var g="",c=0;c<d.length*4;c+=3)for(var a=(d[c>>2]>>8*(c%4)&255)<<16|(d[c+1>>2]>>8*((c+1)%4)&255)<<8|d[c+2>>2]>>8*((c+2)%4)&255,b=0;b<4;b++)g+=c*8+b*6>d.length*32?b64pad:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>6*(3-b)&63);return g}var from={yahoo:{flickr:{}}};if(flickr===undefined)var flickr=from.yahoo.flickr;
from.yahoo.flickr.api=function(d,g){d=d;var c={};c.api_call=function(a,b){b.api_key=key;b.method=a;b.format="json";b.nojsoncallback=1;if(b.auth_token){api_sig=this.sign_args(b);b.api_sig=api_sig}};c.upload=function(a,b){b.api_key=d;api_sig=this.sign_args(b);b.api_sig=api_sig;b.photo=a;if(typeof a==="string")return this._upload_binary(b);return this._upload_blob(b)};c.sign_args=function(a){var b=[];for(var e in a)b[b.length]=[e,a[e]];b.sort(function(f,h){if(f[0]==h[0])return 0;if(f[0]<h[0])return-1;
return 1});a=g;for(e=0;e<b.length;e++){a+=b[e][0];a+=b[e][1]}return hex_md5(a)};c._upload_blob=function(a){var b=new FormData;for(var e in a)b.append(e,a[e]);a=new XMLHttpRequest;a.open("POST","http://api.flickr.com/services/upload/",true);a.onreadystatechange=function(){};a.send(b)};c._upload_binary=function(a){var b=this._generate_multipart_boundary(),e=new XMLHttpRequest;e.open("POST","http://api.flickr.com/services/upload/",true);e.onreadystatechange=function(){};e.setRequestHeader("Content-Type",
"multipart/form-data; boundary="+b);e.sendAsBinary(this._build_multipart_message(a,b))};c._generate_multipart_boundary=function(){return"---------------------------"+(new Date).getTime()};c._build_multipart_message=function(a,b){var e=[];for(var f in a){var h="";if(f=="photo"){h+="Content-Disposition: form-data; ";h+='name="photo"; ';h+='filename="photo"\r\n';h+="Content-Type: application/octet-stream\r\n\r\n"}else{h+="Content-Disposition: form-data; ";h+='name="'+f+'"\r\n\r\n'}h+=a[f]+"\r\n";e.push(h)}f=
"--"+b+"\r\n";f+=e.join("--"+b+"\r\n");f+="--"+b+"--\r\n";return f};return c};if(XMLHttpRequest.prototype.sendAsBinary==undefined)XMLHttpRequest.prototype.sendAsBinary=function(d){d=Array.prototype.map.call(d,function(g){return g.charCodeAt(0)&255});this.send((new Uint8Array(d)).buffer)};
